---
import { Image } from "astro:assets";
import { format } from "date-fns";

type Props = {
  thumbnail?: string;
  title: string;
  description: string;
  slug: string;
  createdAt?: Date;
  type: "works" | "notes";
  tags: string[];
};

const { thumbnail, title, description, slug, createdAt, type, tags } =
  Astro.props;
---

{
  type === "notes" ? (
    <div
      class:list={[
        "group flex w-full flex-col relative p-4 card",
        "flex-wrap rounded-xl overflow-hidden",
        "bg-gradient-to-br from-neutral-900/80 via-neutral-900/60 to-neutral-900/80",
        "border border-neutral-800/50",
        "backdrop-blur-sm",
        "transition-all duration-300 ease-out",
        "hover:border-neutral-700/70 hover:shadow-lg hover:shadow-neutral-900/50",
        "hover:-translate-y-1",
      ]}
    >
      <div class="relative z-10">
        {createdAt ? (
          <span class="font-semibold">{format(createdAt, "LLLL d, yyyy")}</span>
        ) : null}
        <a
          href={`/notes/${slug}`}
          class:list={[
            "mt-2 cursor-pointer text-lg font-bold",
            "no-underline!",
          ]}
        >
          <h3 class="mb-0 mt-0 line-clamp-2 text-2xl font-bold">{title}</h3>
        </a>
        <p class="mb-0 mt-2 line-clamp-3">{description}</p>
        <div class="flex justify-start my-2! items-center gap-2 w-fit flex-wrap">
          {tags.map((item) => (
            <a class="text-base my-2!" href={`/tags/${item}`}>
              <span>#{item}</span>
            </a>
          ))}
        </div>
      </div>
    </div>
  ) : type === "works" ? (
    <div
      class:list={[
        "group flex w-full flex-col relative card",
        "flex-wrap rounded-xl overflow-hidden",
        "bg-gradient-to-br from-neutral-900/80 via-neutral-900/60 to-neutral-900/80",
        "border border-neutral-800/50",
        "backdrop-blur-sm",
        "transition-all duration-300 ease-out",
        "hover:border-neutral-700/70 hover:shadow-lg hover:shadow-neutral-900/50",
        "hover:-translate-y-1",
      ]}
    >
      <div class="relative overflow-hidden">
        <Image
          src={thumbnail as string}
          alt={title}
          width={500}
          height={500}
          quality={100}
          format="avif"
          class="my-0! object-cover h-48! w-full rounded-none! border-none! transition-transform duration-300 group-hover:scale-105"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-neutral-900/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
      </div>
      <div class="w-full p-4 relative z-10">
        <a
          href={`/works/${slug}`}
          class:list={["cursor-pointer text-lg font-bold", "no-underline!"]}
        >
          <h3 class="mb-0 mt-0 line-clamp-2 text-2xl font-bold">{title}</h3>
        </a>
        <p class="mb-0 mt-2">{description}</p>
        <div class="flex justify-start my-2! items-center gap-2 w-fit flex-wrap">
          {tags.map((item) => (
            <a class="text-base" href={`/tags/${item}`}>
              <span>#{item}</span>
            </a>
          ))}
        </div>
      </div>
    </div>
  ) : null
}
